<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Big data - Introduction to R, MATLAB, and Julia in HPC</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../assets/_markdown_exec_pyodide.css" rel="stylesheet" />
        <link href="../../assets/_markdown_exec_ansi.css" rel="stylesheet" />
        <link href="../../assets/_mkdocstrings.css" rel="stylesheet" />
        <link href="../../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Big data";
        var mkdocs_page_input_path = "advanced/big_data_managers.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../..">
          <img src="../../img/new-logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Overview</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Prequisites</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../prereqs/">Prerequisites</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../preparations_account/">Preparations with course project</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../preparations_cluster/">Preparations on the cluster</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Common</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../common/login/">Login</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../projects/">Projects</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../common/use_tarball/">Use the tarball</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../common/use_text_editor/">Use a text editor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../common/hpc_clusters/">HPC clusters</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../common/other_courses/">Other courses</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../common/on-demand/">Desktop on demand</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">R</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../r/schedule/">Schedule</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../r/intro/">Intro</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../r/load_run/">Load and run</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../r/packages/">Packages</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../r/batch/">Batch</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../r/interactive/">Interactive work on the compute nodes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../r/rstudio/">RStudio</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../r/summary/">Summary</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../r/evaluation/">Evaluation</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">MATLAB</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../matlab/schedule/">Schedule</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../matlab/intro-matlab/">Intro</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../matlab/load_runMatlab/">Load and run</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../matlab/slurmMatlab/">MATLAB terminal and Slurm</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../matlab/interactive/">Interactive work on the compute nodes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../matlab/MatlabGUIslurm/">MATLAB GUI and batch jobs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../matlab/matlab-addons/">MATLAB Add-Ons</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../matlab/matlab-summary/">Summary</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../matlab/evaluation-matlab/">Evaluation</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Julia</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../julia/schedule/">Schedule</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../julia/intro/">Intro</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../julia/load_run/">Load and run</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../julia/environments_packages/">Environments and packages</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../julia/batch/">Batch jobs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../julia/interactive/">Interactive work on the compute nodes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../julia/summary/">Summary</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../julia/evaluation-julia/">Evaluation</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Advanced</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../schedule/">Schedule</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../parallel_computing/">Parallel computing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../thread_parallelism/">Thread parallelism</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../distributed_parallelism/">Distributed parallelism</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Big data</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#big-data">Big data</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#effective-storage">Effective storage</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#allocating-memory-ram">Allocating memory (RAM)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#extra-cluster-managers">Extra: Cluster Managers</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#julia">Julia</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gpus/">Introduction to GPUs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Machine Learning</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../ML/">Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../MLR/">With R</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../MLjulia/">With Julia</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../MLmatlab/">With MATLAB</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../summary/">Summary</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../evaluation/">Evaluation</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Misc</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../evaluations/">Evaluations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../lesson_plans/">Lesson plans</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../reflections/">Reflections</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Extra reading</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../r/morepackages/">More about R packages</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../matlab/extra/">More about Matlab</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../julia/extra/">More about Julia</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Introduction to R, MATLAB, and Julia in HPC</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Advanced</li>
      <li class="breadcrumb-item active">Big data</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/UPPMAX/R-matlab-julia-HPC/blob/main/docs/advanced/big_data_managers.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="big-data-and-cluster-managers">Big data and cluster managers<a class="headerlink" href="#big-data-and-cluster-managers" title="Anchor link to this section for reference">&para;</a></h1>
<div class="admonition info">
<p class="admonition-title">Learning outcomes</p>
<ul>
<li>I understand how I can work with big data</li>
<li>I know where to find more information about big data</li>
<li>I understand how cluster managers work</li>
<li>I know where to find more information about cluster managers</li>
</ul>
</div>
<h2 id="big-data">Big data<a class="headerlink" href="#big-data" title="Anchor link to this section for reference">&para;</a></h2>
<ul>
<li>Sometimes the workflow you are targeting doesn&rsquo;t require extensive computations but mainly dealing with
big pieces of data. </li>
<li>An example can be, reading a column-structured file and doing some transformation per-column.</li>
<li>Fortunately, all languages covered in this course have already several tools to deal with big data.</li>
<li>We list some of these tools in what follows but notice that other tools doing similar jobs can be
available for each language.</li>
</ul>
<div class="admonition admonition">
<p class="admonition-title">Language-specific tools for big data</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">R</label><label for="__tabbed_1_2">Matlab</label><label for="__tabbed_1_3">Julia</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><a href="https://arrow.apache.org/docs/r/index.html">Arrow</a> (previously <em>disk.frame</em>) can deal with
 big arrays. Other tools include <a href="https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html">data.table</a>
 and <a href="https://cran.r-project.org/web/packages/bigmemory/index.html">bigmemory</a>.</p>
</div>
<div class="tabbed-block">
<ul>
<li><a href="https://se.mathworks.com/help/matlab/tall-arrays.html">Tall Arrays</a> and</li>
<li><a href="https://se.mathworks.com/help/parallel-computing/distributed-arrays.html">Distributed Arrays</a>
 will assist you when dealing with large arrays.</li>
</ul>
</div>
<div class="tabbed-block">
<ul>
<li>According to the developers of this framework, <a href="https://juliaparallel.org/Dagger.jl/dev/">Dagger</a>
 is heavily inspired on Dask. It support distributed arrays so that they could fit the memory and
 also the possibility of parallelizing the computations on these arrays.</li>
<li>Memory-mapping <a href="https://docs.julialang.org/en/v1/stdlib/Mmap">with Mmap</a></li>
<li><a href="https://github.com/seung-lab/BigArrays.jl">Big-Arrays</a></li>
</ul>
</div>
</div>
</div>
</div>
<h2 id="effective-storage">Effective storage<a class="headerlink" href="#effective-storage" title="Anchor link to this section for reference">&para;</a></h2>
<p>Under construction</p>
<div class="admonition note">
<p class="admonition-title">See Python material for inspiration</p>
<p><a href="https://uppmax.github.io/HPC-python/day3/big_data.html#high-performance-data-analytics-hpda">https://uppmax.github.io/HPC-python/day3/big_data.html#high-performance-data-analytics-hpda</a></p>
</div>
<h2 id="allocating-memory-ram">Allocating memory (RAM)<a class="headerlink" href="#allocating-memory-ram" title="Anchor link to this section for reference">&para;</a></h2>
<ul>
<li>
<p>Storing the data in an efficient way is one thing!</p>
</li>
<li>
<p>Using the data in a program is another. </p>
</li>
<li>How much is actually loaded into the working memory (RAM)</li>
<li>Is more data in variables created during the run or work?</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul>
<li>Allocate many cores or a full node!</li>
<li>You do not have to explicitely run threads or other parallelism.</li>
<li>Note that shared memory among the cores works within node only.</li>
</ul>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<ul>
<li>On some clusters you do not have to request additional CPUs to get additional memory.</li>
<li>You can use the Slurm options<ul>
<li><code>--mem</code> or </li>
<li><code>--mem-per-cpu</code></li>
</ul>
</li>
</ul>
</div>
<div class="admonition discussion">
<p class="admonition-title">Discussion</p>
<ul>
<li>Take some time to find out the answers on the questions below, using the table of hardware</li>
<li>I&rsquo;ll ask around in a few minutes</li>
</ul>
</div>
<details class="note">
<summary>Table of hardware</summary>
<table>
<thead>
<tr>
<th>Technology</th>
<th>Kebnekaise</th>
<th>Pelle</th>
<th>Bianca</th>
<th>Cosmos</th>
<th>Tetralith</th>
<th>Dardel</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cores/compute node</td>
<td>28 (72 for largemem, 128/256 for AMD Zen3/Zen4)</td>
<td>20</td>
<td>16</td>
<td>48</td>
<td>32</td>
<td>128</td>
</tr>
<tr>
<td>Memory/compute node</td>
<td>128-3072 GB</td>
<td>128-1024 GB</td>
<td>128-512 GB</td>
<td>256-512 GB</td>
<td>96-384 GB</td>
<td>256-2048 GB</td>
</tr>
<tr>
<td>GPU</td>
<td>NVidia V100, A100, A6000, L40s, H100, A40, AMD MI100</td>
<td>L40s, H100</td>
<td>NVidia A100</td>
<td>NVidia A100</td>
<td>NVidia T4</td>
<td>4 AMD Instinct™ MI250X á 2 GCDs</td>
</tr>
</tbody>
</table>
</details>
<!---   
    .. list-table:: Hardware
      :widths: 25 25 25 25 25 25 25 25
      :header-rows: 1

      * - Technology
        - Kebnekaise
        - Pelle
        - Bianca
        - Cosmos  
        - Tetralith   
        - Dardel
      * - Cores/compute node
        - 28 (72 for largemem, 128/256 for AMD Zen3/Zen4)
        - 20
        - 16
        - 48  
        - 32  
        - 128
      * - Memory/compute node
        - 128-3072 GB 
        - 128-1024 GB
        - 128-4096 GB
        - 256-512 GB  
        - 96-384 GB   
        - 256-2048 GB
      * - GPU
        - NVidia V100, A100, A6000, L40s, H100, A40, AMD MI100 
        - None
        - NVidia A100
        - NVidia A100 
        - NVidia T4   
        - 4 AMD Instinct™ MI250X á 2 GCDs

-->

<details class="example">
<summary>How much memory do I get per core?</summary>
<ul>
<li>Divide GB RAM of the booked node with number of cores.</li>
<li>Example: 128 GB node with 20 cores<ul>
<li>~6.4 GB per core</li>
</ul>
</li>
</ul>
</details>
<details class="example">
<summary>How much memory do I get with 5 cores?</summary>
<ul>
<li>Multiply the RAM per core with number of allocated cores..</li>
<li>Example: 6.4 GB per core <ul>
<li>~32 GB </li>
</ul>
</li>
</ul>
</details>
<details class="example">
<summary>Do you remember how to allocate several cores?</summary>
<ul>
<li>Slurm flag <code>-n &lt;number of cores&gt;</code></li>
</ul>
</details>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<ul>
<li>Choose, if necessary a node with more RAM</li>
<li>See local HPC center documentation in how to do so!</li>
</ul>
</div>
<h2 id="extra-cluster-managers">Extra: Cluster Managers<a class="headerlink" href="#extra-cluster-managers" title="Anchor link to this section for reference">&para;</a></h2>
<h3 id="julia">Julia<a class="headerlink" href="#julia" title="Anchor link to this section for reference">&para;</a></h3>
<p>The package <em>ClusterManagers.jl</em> allows you to submit expensive parts of your simulation
to the batch queue in a more <em>interactive</em> manner than by using batch scripts. <em>ClusterManagers.jl</em>
needs to be installed through <strong>Pkg</strong>. This can useful, for instance if you are developing some
code where just specific parts are computationally heavy while the rest is related to data analysis
or visualization. In order to use this package, you should add it in a Julia session.</p>
<div class="language-julia highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">using</span><span class="w"> </span><span class="n">Distributed</span><span class="p">,</span><span class="w"> </span><span class="n">ClusterManagers</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="c"># Adapted from: https://github.com/JuliaParallel/ClusterManagers.jl</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="c"># Arguments to the Slurm srun(1) command can be given as keyword</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c"># arguments to addprocs.  The argument name and value is translated to</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="c"># a srun(1) command line argument as follows:</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="c"># 1) If the length of the argument is 1 =&gt; &quot;-arg value&quot;,</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c">#    e.g. t=&quot;0:1:0&quot; =&gt; &quot;-t 0:1:0&quot;</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="c"># 2) If the length of the argument is &gt; 1 =&gt; &quot;--arg=value&quot;</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="c">#    e.g. time=&quot;0:1:0&quot; =&gt; &quot;--time=0:1:0&quot;</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="c"># 3) If the value is the empty string, it becomes a flag value,</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="c">#    e.g. exclusive=&quot;&quot; =&gt; &quot;--exclusive&quot;</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="c"># 4) If the argument contains &quot;_&quot;, they are replaced with &quot;-&quot;,</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="c">#    e.g. mem_per_cpu=100 =&gt; &quot;--mem-per-cpu=100&quot;</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="c"># Example: add 2 processes, with your project ID, allocated 5 min, and 2 cores</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="n">addprocs</span><span class="p">(</span><span class="n">SlurmManager</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span><span class="w"> </span><span class="n">A</span><span class="o">=</span><span class="s">&quot;project_ID&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">partition</span><span class="o">=</span><span class="s">&quot;name-of-partition&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="o">=</span><span class="s">&quot;00:05:00&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="o">=</span><span class="s">&quot;2&quot;</span><span class="p">)</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="c"># Define a function that computes the square of a number</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="nd">@everywhere</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">square</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="o">^</span><span class="mi">2</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="k">end</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="n">hosts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">workers</span><span class="p">()</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="w">    </span><span class="n">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fetch</span><span class="p">(</span><span class="nd">@spawnat</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">gethostname</span><span class="p">())</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="w">    </span><span class="n">push!</span><span class="p">(</span><span class="n">hosts</span><span class="p">,</span><span class="w"> </span><span class="n">host</span><span class="p">)</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="w">    </span><span class="n">result_partial</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fetch</span><span class="p">(</span><span class="nd">@spawnat</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">square</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="w">    </span><span class="n">push!</span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">result_partial</span><span class="p">)</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="k">end</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a><span class="n">println</span><span class="p">(</span><span class="n">hosts</span><span class="p">)</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="n">println</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a><span class="c"># The Slurm resource allocation is released when all the workers have</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a><span class="c"># exited</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">workers</span><span class="p">()</span>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a><span class="w">    </span><span class="n">rmprocs</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a><span class="k">end</span>
</span></code></pre></div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../distributed_parallelism/" class="btn btn-neutral float-left" title="Distributed parallelism"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../gpus/" class="btn btn-neutral float-right" title="Introduction to GPUs">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/UPPMAX/R-matlab-julia-HPC" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../distributed_parallelism/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../gpus/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../assets/_markdown_exec_pyodide.js"></script>
      <script src="../../js/popper.min.js"></script>
      <script src="../../js/tippy-bundle.umd.js"></script>
      <script src="../../js/clipboard.js"></script>
      <script src="../../js/extra.js"></script>
      <script src="../../search/main.js"></script>
      <script src="../../js/open_in_new_tab.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
