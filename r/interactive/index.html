<!DOCTYPE html>

<html class="writer-html5" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="../../img/favicon.ico" rel="shortcut icon"/>
<title>Interactive work on the compute nodes - Introduction to R, MATLAB, and Julia in HPC</title>
<link href="../../css/theme.css" rel="stylesheet"/>
<link href="../../css/theme_extra.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" rel="stylesheet"/>
<link href="../../assets/_markdown_exec_pyodide.css" rel="stylesheet"/>
<link href="../../assets/_markdown_exec_ansi.css" rel="stylesheet"/>
<link href="../../assets/_mkdocstrings.css" rel="stylesheet"/>
<link href="../../css/extra.css" rel="stylesheet"/>
<script>
        // Current page data
        var mkdocs_page_name = "Interactive work on the compute nodes";
        var mkdocs_page_input_path = "r/interactive.md";
        var mkdocs_page_url = null;
      </script>
<!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
</head>
<body class="wy-body-for-nav" role="document">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side stickynav" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a href="../..">
<img alt="Logo" class="logo" src="../../img/new-logo.png"/>
</a><div role="search">
<form action="../../search.html" class="wy-form" id="rtd-search-form" method="get">
<input aria-label="Search docs" name="q" placeholder="Search docs" title="Type search term here" type="text"/>
</form>
</div>
</div>
<div aria-label="Navigation menu" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../..">Overview</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Prequisites</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../prereqs/">Prerequisites</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../preparations_account/">Preparations with course project</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../preparations_cluster/">Preparations on the cluster</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Common</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../common/login/">Login</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../projects/">Projects</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../common/use_tarball/">Use the tarball</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../common/use_text_editor/">Use a text editor</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../common/hpc_clusters/">HPC clusters</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../common/other_courses/">Other courses</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../common/on-demand/">Desktop on demand</a>
</li>
</ul>
<p class="caption"><span class="caption-text">R</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../schedule/">Schedule</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../intro/">Intro</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../load_run/">Load and run</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../packages/">Packages</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../batch/">Batch</a>
</li>
<li class="toctree-l1 current"><a class="reference internal current" href="#">Interactive work on the compute nodes</a>
<ul class="current">
<li class="toctree-l2"><a class="reference internal" href="#overview-of-the-uppmax-systems">Overview of the UPPMAX systems</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#overview-of-the-hpc2n-system">Overview of the HPC2N system</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#overview-of-the-lunarc-system">Overview of the LUNARC system</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#overview-of-the-nsc-system">Overview of the NSC system</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#general">General</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#r-interactively-on-the-compute-nodes">R “interactively” on the compute nodes</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#example">Example</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#exit">Exit</a>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rstudio/">RStudio</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../summary/">Summary</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../evaluation/">Evaluation</a>
</li>
</ul>
<p class="caption"><span class="caption-text">MATLAB</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../matlab/schedule/">Schedule</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../matlab/intro-matlab/">Intro</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../matlab/load_runMatlab/">Load and run</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../matlab/slurmMatlab/">MATLAB terminal and Slurm</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../matlab/interactive/">Interactive work on the compute nodes</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../matlab/MatlabGUIslurm/">MATLAB GUI and batch jobs</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../matlab/matlab-addons/">MATLAB Add-Ons</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../matlab/matlab-summary/">Summary</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../matlab/evaluation-matlab/">Evaluation</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Julia</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../julia/schedule/">Schedule</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../julia/intro/">Intro</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../julia/load_run/">Load and run</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../julia/environments_packages/">Environments and packages</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../julia/batch/">Batch jobs</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../julia/interactive/">Interactive work on the compute nodes</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../julia/summary/">Summary</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../julia/evaluation-julia/">Evaluation</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Advanced</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/schedule/">Schedule</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/parallel_computing/">Parallel computing</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/thread_parallelism/">Thread parallelism</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/distributed_parallelism/">Distributed parallelism</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/big_data_managers/">Big data</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/gpus/">Introduction to GPUs</a>
</li>
<li class="toctree-l1"><a class="reference internal">Machine Learning</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="../../advanced/ML/">Introduction</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced/MLR/">With R</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced/MLjulia/">With Julia</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced/MLmatlab/">With MATLAB</a>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/summary/">Summary</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/evaluation/">Evaluation</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../evaluations/">Evaluations</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson_plans/">Lesson plans</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reflections/">Reflections</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Extra reading</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../morepackages/">More about R packages</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../matlab/extra/">More about Matlab</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../julia/extra/">More about Julia</a>
</li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">
<nav aria-label="Mobile navigation menu" class="wy-nav-top" role="navigation">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="../..">Introduction to R, MATLAB, and Julia in HPC</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content"><div aria-label="breadcrumbs navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a aria-label="Docs" class="icon icon-home" href="../.."></a></li>
<li class="breadcrumb-item">R</li>
<li class="breadcrumb-item active">Interactive work on the compute nodes</li>
<li class="wy-breadcrumbs-aside">
<a class="icon icon-github" href="https://github.com/UPPMAX/R-matlab-julia-HPC/blob/main/docs/r/interactive.md"> Edit on GitHub</a>
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div class="section" itemprop="articleBody">
<h1 id="interactive-work-on-the-compute-nodes">Interactive work on the compute nodes<a class="headerlink" href="#interactive-work-on-the-compute-nodes" title="Anchor link to this section for reference">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>It is possible to run R directly on the login (including ThinLinc) nodes.</li>
<li>should <em>only</em> be done for short and small jobs </li>
<li>otherwise the login node becomes slow for all users. </li>
<li>If you want to work interactively with your code or data, you should </li>
<li>start an <strong>interactive session</strong>.</li>
<li>this includes Open OnDemand at those centres that have it </li>
<li>If you rather will run a script which <strong>won’t use any interactive user input while running</strong>, you should</li>
<li>start a <strong>batch job</strong>, see previous session.</li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Questions</p>
<ul>
<li>How do I proceed to work interactively on a compute node</li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Objectives</p>
<ul>
<li>Show how to reach the calculation nodes on UPPMAX and HPC2N</li>
<li>Test some commands on the calculation nodes</li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Compute allocations in this workshop</p>
</div>
<ul>
<li>Rackham/Pelle: <code>uppmax2025-2-360</code></li>
<li>Kebnekaise: <code>hpc2n2025-151</code></li>
<li>Cosmos: <code>lu2025-2-94</code></li>
<li>Tetralith: <code>naiss2025-22-934</code></li>
<li>Dardel: <code>naiss2025-22-934</code></li>
<li>Alvis: <code>naiss2025-22-934</code></li>
</ul>
<h2 id="overview-of-the-uppmax-systems">Overview of the UPPMAX systems<a class="headerlink" href="#overview-of-the-uppmax-systems" title="Anchor link to this section for reference">¶</a></h2>
<p><img alt="UPPMAX systems" src="../../img/uppmax.png"/></p>
<h2 id="overview-of-the-hpc2n-system">Overview of the HPC2N system<a class="headerlink" href="#overview-of-the-hpc2n-system" title="Anchor link to this section for reference">¶</a></h2>
<p><img alt="HPC2N system" src="../../img/hpc2n.png"/></p>
<h2 id="overview-of-the-lunarc-system">Overview of the LUNARC system<a class="headerlink" href="#overview-of-the-lunarc-system" title="Anchor link to this section for reference">¶</a></h2>
<p><img alt="Cosmos resource" src="../../img/cosmos-resources.png"/></p>
<h2 id="overview-of-the-nsc-system">Overview of the NSC system<a class="headerlink" href="#overview-of-the-nsc-system" title="Anchor link to this section for reference">¶</a></h2>
<p><img alt="Tetralith" src="../../img/mermaid-tetralith.png"/></p>
<h2 id="general">General<a class="headerlink" href="#general" title="Anchor link to this section for reference">¶</a></h2>
<p>In order to run interactively, you need to have compute nodes allocated to run
on, and this is done through the batch system.  </p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul>
<li>
<p>(HPC2N) Do note that it (salloc) is not <em>real</em> interactivity as you probably mean it, as you will have to run it as a R script instead of by starting R and giving commands inside it. The reason for this is that you are not actually logged into the compute node and only sees the output of the commands you run. You also need to preface with <code>srun</code> or it will run on the login node. </p>
</li>
<li>
<p>The way to get real interactivity at HPC2N is to use the Open OnDemand desktop (https://portal.hpc2n.umu.se) </p>
</li>
</ul>
</div>
<h2 id="r-interactively-on-the-compute-nodes">R “interactively” on the compute nodes<a class="headerlink" href="#r-interactively-on-the-compute-nodes" title="Anchor link to this section for reference">¶</a></h2>
<p>To run interactively, you need to allocate resources on the cluster first. You can use the command <code>salloc</code>/<code>interactive</code> to allow interactive use of resources allocated to your job. When the resources are allocated, if you are using HPC2N and <code>salloc</code> you need to preface commands with <code>srun</code> in order to run on the allocated nodes instead of the login node. </p>
<ul>
<li>First, you make a request for resources with <code>interactive</code>/<code>salloc</code>, like this:</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="1:6"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"/><input id="__tabbed_1_2" name="__tabbed_1" type="radio"/><input id="__tabbed_1_3" name="__tabbed_1" type="radio"/><input id="__tabbed_1_4" name="__tabbed_1" type="radio"/><input id="__tabbed_1_5" name="__tabbed_1" type="radio"/><input id="__tabbed_1_6" name="__tabbed_1" type="radio"/><div class="tabbed-labels"><label for="__tabbed_1_1">UPPMAX (interactive)</label><label for="__tabbed_1_2">HPC2N (salloc)</label><label for="__tabbed_1_3">LUNARC (interactive)</label><label for="__tabbed_1_4">NSC (interactive)</label><label for="__tabbed_1_5">PDC (salloc + ssh)</label><label for="__tabbed_1_6">C3SE</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a>$<span class="w"> </span>interactive<span class="w"> </span>-n<span class="w"> </span>&lt;tasks&gt;<span class="w"> </span>--time<span class="o">=</span>HHH:MM:SS<span class="w"> </span>-A<span class="w"> </span>uppmax2025-2-360<span class="w"> </span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a>$<span class="w"> </span>salloc<span class="w"> </span>-n<span class="w"> </span>&lt;tasks&gt;<span class="w"> </span>--time<span class="o">=</span>HHH:MM:SS<span class="w"> </span>-A<span class="w"> </span>hpc2n2024-025<span class="w"> </span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a>interactive<span class="w"> </span>-A<span class="w"> </span>lu2025-2-94<span class="w"> </span>-t<span class="w"> </span>HHH:MM:SS
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a>interactive<span class="w"> </span>-A<span class="w"> </span>naiss2025-22-934
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a>salloc<span class="w"> </span>--time<span class="o">=</span>HHH:MM:SS<span class="w"> </span>-A<span class="w"> </span>naiss2025-22-934<span class="w"> </span>-p<span class="w"> </span><span class="o">[</span>partition<span class="o">]</span>
</span></code></pre></div>
<p>Where <code>[partition]</code> is main or gpu. After your resources have been allocated, you can login to the compute node with <code>ssh &lt;node&gt;</code> and have real interactivity. </p>
</div>
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>srun<span class="w"> </span>-A<span class="w"> </span>NAISS2025-22-934<span class="w"> </span>-p<span class="w"> </span>alvis<span class="w"> </span>--gpus-per-node<span class="o">=</span>T4:1<span class="w"> </span>--pty<span class="w"> </span>bash
</span></code></pre></div>
</div>
</div>
</div>
<p>Your request enters the job queue just like any other job, and interactive/salloc will tell you that it is waiting for the requested resources. When salloc tells you that your job has been allocated resources, you can interactively run programs on those resources with <code>srun</code> (or login to the compute node with ssh on PDC). The commands you run with <code>srun</code> will then be executed on the resources your job has been allocated. If you do not preface with <code>srun</code> the command is run on the login node! </p>
<p>You can now run R scripts on the allocated resources directly instead of waiting for your batch job to return a result. This is an advantage if you want to test your R script or perhaps figure out which parameters are best.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Let us use ThinLinc or Open OnDemand (where available)</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:6"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio"/><input id="__tabbed_2_2" name="__tabbed_2" type="radio"/><input id="__tabbed_2_3" name="__tabbed_2" type="radio"/><input id="__tabbed_2_4" name="__tabbed_2" type="radio"/><input id="__tabbed_2_5" name="__tabbed_2" type="radio"/><input id="__tabbed_2_6" name="__tabbed_2" type="radio"/><div class="tabbed-labels"><label for="__tabbed_2_1">UPPMAX</label><label for="__tabbed_2_2">HPC2N</label><label for="__tabbed_2_3">LUNARC</label><label for="__tabbed_2_4">NSC (Tetralith)</label><label for="__tabbed_2_5">PDC</label><label for="__tabbed_2_6">C3SE (Alvis)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<ul>
<li>ThinLinc app: <code>&lt;user&gt;@rackham-gui.uppmax.uu.se</code></li>
<li>ThinLinc in web browser: <code>https://rackham-gui.uppmax.uu.se</code>   This requires 2FA!</li>
<li>ThinLinc (Pelle): <code>&lt;user&gt;@pelle-gui.uppmax.uu.se</code></li>
<li>ThinLinc (Pelle) in web browser: <code>https://pelle-gui.uppmax.uu.se</code>   This requires 2FA!</li>
</ul>
</div>
<div class="tabbed-block">
<ul>
<li>ThinLinc: kebnekaise-tl.hpc2n.umu.se</li>
<li>From web browser: https://kebnekaise-tl.hpc2n.umu.se:300/</li>
<li>OpenOnDemand: https://portal.hpc2n.umu.se (click <a href="here for documentation on RStudio with Open OnDemand">https://docs.hpc2n.umu.se/tutorials/connections/#interactive__apps__-__rstudio__server</a>)</li>
</ul>
</div>
<div class="tabbed-block">
<ul>
<li>ThinLinc: <code>cosmos-dt.lunarc.lu.se</code><ul>
<li>Note that you need to setup <a href="https://lunarc-documentation.readthedocs.io/en/latest/getting_started/login_howto/" target="_blank">TFA (PocketPass)</a> to use LUNARC!</li>
</ul>
</li>
<li>You can start Gfx (Open OnDemand) from inside ThinLinc! </li>
</ul>
</div>
<div class="tabbed-block">
<ul>
<li>ThinLinc: tetralith.pdc.kth.se<ul>
<li>2FA required! https://www.nsc.liu.se/support/2fa/</li>
</ul>
</li>
</ul>
</div>
<div class="tabbed-block">
<ul>
<li>ThinLinc: dardel-vnc.nsc.kth.se<ul>
<li>SSH keys or kerberos needed! https://support.pdc.kth.se/doc/support/?section=/doc/support-docs/basics/quickstart</li>
</ul>
</li>
</ul>
</div>
<div class="tabbed-block">
<ul>
<li>OpenOnDemand: https://alvis.c3se.chalmers.se<ul>
<li>https://www.c3se.chalmers.se/documentation/connecting/remote_graphics/</li>
<li>Note that Alvis is accessible via SUNET networks (i.e. most Swedish university networks). If you are not on one of those networks you need to use a VPN - preferrably your own Swedish university VPN. If this is not possible, contact <code>support@chalmers.se</code> and ask to be added to the Chalmers’s eduVPN.</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<p><strong>Using terminal</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:6"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio"/><input id="__tabbed_3_2" name="__tabbed_3" type="radio"/><input id="__tabbed_3_3" name="__tabbed_3" type="radio"/><input id="__tabbed_3_4" name="__tabbed_3" type="radio"/><input id="__tabbed_3_5" name="__tabbed_3" type="radio"/><input id="__tabbed_3_6" name="__tabbed_3" type="radio"/><div class="tabbed-labels"><label for="__tabbed_3_1">NSC</label><label for="__tabbed_3_2">HPC2N</label><label for="__tabbed_3_3">UPPMAX</label><label for="__tabbed_3_4">LUNARC</label><label for="__tabbed_3_5">PDC</label><label for="__tabbed_3_6">C3SE</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<ul>
<li>SSH: <code>ssh &lt;user&gt;@tetralith.nsc.liu.se</code></li>
<li>Note that you need to setup <a href="https://www.nsc.liu.se/support/2fa/" target="_blank">TFA</a> to use NSC!</li>
</ul>
</div>
<div class="tabbed-block">
<ul>
<li>SSH: <code>ssh &lt;user&gt;@kebnekaise.hpc2n.umu.se</code></li>
</ul>
</div>
<div class="tabbed-block">
<p><strong>Rackham</strong></p>
<ul>
<li>SSH: <code>ssh &lt;user&gt;@rackham.uppmax.uu.se</code></li>
<li>Note that you may have to setup &lt;a href=”https://docs.uppmax.uu.se/getting_started/get_uppmax_2fa/”</li>
</ul>
<p>*<em>Pelle</em></p>
<ul>
<li>SSH: <code>ssh &lt;user&gt;@pelle.uppmax.uu.se</code></li>
<li>Note that you may have to setup <a href="https://docs.uppmax.uu.se/getting_started/get_uppmax_2fa/" target="_blank">TFA for Uppmax</a> when using either of the ThinLinc connections.</li>
</ul>
</div>
<div class="tabbed-block">
<ul>
<li>SSH: <code>ssh &lt;user&gt;@cosmos.lunarc.lu.se</code></li>
<li>Note that you need to setup <a href="https://lunarc-documentation.readthedocs.io/en/latest/getting_started/login_howto/" target="_blank">TFA (PocketPass)</a> to use LUNARC!</li>
</ul>
</div>
<div class="tabbed-block">
<ul>
<li>SSH: <code>ssh &lt;user&gt;@dardel.pdc.kth.se</code></li>
<li>Note that you need to setup <a href="https://support.pdc.kth.se/doc/login/ssh_login/" target="_blank">SSH keys</a> or kerberos in order to login to PDC!</li>
</ul>
</div>
<div class="tabbed-block">
<ul>
<li>SSH: <code>ssh &lt;user&gt;@alvis1.c3se.chalmers.se</code>
       or
       <code>ssh &lt;user&gt;@alvis2.c3se.chalmers.se</code></li>
<li>Note that Alvis is accessible via SUNET networks (i.e. most Swedish university networks). If you are not on one of those networks you need to use a VPN - preferrably your own Swedish university VPN. If this is not possible, contact <code>support@chalmers.se</code> and ask to be added to the Chalmers’s eduVPN.</li>
</ul>
</div>
</div>
</div>
<p><strong>In any case:</strong> </p>
<ul>
<li>Remember to have X11 installed!</li>
<li>On Mac</li>
<li>install XQuartz</li>
<li>On Windows</li>
<li>Use MobaXterm or</li>
<li>install XMING and use with Putty or PowerShell</li>
</ul>
</div>
<h3 id="example">Example<a class="headerlink" href="#example" title="Anchor link to this section for reference">¶</a></h3>
<p><strong>Requesting 4 cores for 10 minutes, then running R</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio"/><div class="tabbed-labels"><label for="__tabbed_4_1">UPPMAX</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="o">[</span>bjornc@pelle2<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>interactive<span class="w"> </span>-A<span class="w"> </span>uppmax2025-2-360<span class="w"> </span>-n<span class="w"> </span><span class="m">4</span><span class="w"> </span>-t<span class="w"> </span><span class="m">10</span>:00
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>This<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>temporary<span class="w"> </span>version<span class="w"> </span>of<span class="w"> </span>interactive-script<span class="w"> </span><span class="k">for</span><span class="w"> </span>Pelle
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>Most<span class="w"> </span>interactive-script<span class="w"> </span>functionality<span class="w"> </span>is<span class="w"> </span>removed
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>salloc:<span class="w"> </span>Pending<span class="w"> </span>job<span class="w"> </span>allocation<span class="w"> </span><span class="m">82050</span>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>salloc:<span class="w"> </span>job<span class="w"> </span><span class="m">82050</span><span class="w"> </span>queued<span class="w"> </span>and<span class="w"> </span>waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>resources
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>salloc:<span class="w"> </span>job<span class="w"> </span><span class="m">82050</span><span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>allocated<span class="w"> </span>resources
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a>salloc:<span class="w"> </span>Granted<span class="w"> </span>job<span class="w"> </span>allocation<span class="w"> </span><span class="m">82050</span>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a>salloc:<span class="w"> </span>Waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>resource<span class="w"> </span>configuration
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a>salloc:<span class="w"> </span>Nodes<span class="w"> </span>p102<span class="w"> </span>are<span class="w"> </span>ready<span class="w"> </span><span class="k">for</span><span class="w"> </span>job
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="o">[</span>bjornc@p102<span class="w"> </span>~<span class="o">]</span>$
</span></code></pre></div>
<p>Let us check that we actually run on the compute node: </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="o">[</span>bjornc@p102<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>srun<span class="w"> </span>hostname
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a>p102.uppmax.uu.se
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a>p102.uppmax.uu.se
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a>p102.uppmax.uu.se
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a>p102.uppmax.uu.se
</span></code></pre></div>
<p>We are! Notice that we got a response from all four cores we have allocated.   </p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio"/><div class="tabbed-labels"><label for="__tabbed_5_1">HPC2N</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="o">[</span>~<span class="o">]</span>$<span class="w"> </span>salloc<span class="w"> </span>-n<span class="w"> </span><span class="m">4</span><span class="w"> </span>--time<span class="o">=</span><span class="m">00</span>:30:00<span class="w"> </span>-A<span class="w"> </span>hpc2n2024-025
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a>salloc:<span class="w"> </span>Pending<span class="w"> </span>job<span class="w"> </span>allocation<span class="w"> </span><span class="m">20174806</span>
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a>salloc:<span class="w"> </span>job<span class="w"> </span><span class="m">20174806</span><span class="w"> </span>queued<span class="w"> </span>and<span class="w"> </span>waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>resources
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a>salloc:<span class="w"> </span>job<span class="w"> </span><span class="m">20174806</span><span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>allocated<span class="w"> </span>resources
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a>salloc:<span class="w"> </span>Granted<span class="w"> </span>job<span class="w"> </span>allocation<span class="w"> </span><span class="m">20174806</span>
</span><span id="__span-8-6"><a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a>salloc:<span class="w"> </span>Waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>resource<span class="w"> </span>configuration
</span><span id="__span-8-7"><a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a>salloc:<span class="w"> </span>Nodes<span class="w"> </span>b-cn0241<span class="w"> </span>are<span class="w"> </span>ready<span class="w"> </span><span class="k">for</span><span class="w"> </span>job
</span><span id="__span-8-8"><a href="#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="o">[</span>~<span class="o">]</span>$<span class="w"> </span>module<span class="w"> </span>load<span class="w"> </span>GCC/12.2.0<span class="w">  </span>OpenMPI/4.1.4<span class="w"> </span>R/4.2.2
</span><span id="__span-8-9"><a href="#__codelineno-8-9" id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="o">[</span>~<span class="o">]</span>$<span class="w"> </span>
</span></code></pre></div>
<p>Let us check that we actually run on the compute node: </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="o">[</span>~<span class="o">]</span>$<span class="w"> </span>srun<span class="w"> </span>hostname
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a>b-cn0241.hpc2n.umu.se
</span><span id="__span-9-3"><a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a>b-cn0241.hpc2n.umu.se
</span><span id="__span-9-4"><a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a>b-cn0241.hpc2n.umu.se
</span><span id="__span-9-5"><a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a>b-cn0241.hpc2n.umu.se
</span></code></pre></div>
<p>We are. Notice that we got a response from all four cores we have allocated.   </p>
</div>
</div>
</div>
</div>
</div>
</div>
<p><strong>Running a script</strong></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul>
<li>You need to reload all modules you used on the login node!!!</li>
</ul>
</div>
<p><strong>The script</strong> </p>
<p>Adding two numbers from user input (<code>serial_sum.R</code>)</p>
<ul>
<li>You will find it in the exercise directory <code>exercises/r/</code> so go there with <code>cd</code>.</li>
<li>Otherwise, use your favourite editor and add the text below and save as <code>serial_sum.R</code>.</li>
</ul>
<div class="language-R highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="c1"># This program will add two numbers that are provided by the user</span>
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">commandArgs</span><span class="p">(</span><span class="n">trailingOnly</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span>
</span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="m">1</span><span class="p">])</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="m">2</span><span class="p">])</span>
</span><span id="__span-10-4"><a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="nf">print</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="s">"The sum of the two numbers is"</span><span class="p">,</span><span class="w"> </span><span class="n">res</span><span class="p">))</span>
</span></code></pre></div>
<p><strong>Running the script</strong></p>
<ul>
<li>Note that the commands are the same for both HPC2N and UPPMAX!</li>
</ul>
<p>Running a R script in the allocation we made further up. Notice that since we asked for 4 cores, the script is run 4 times, since it is a serial script</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a>$<span class="w"> </span>srun<span class="w"> </span>Rscript<span class="w"> </span>serial_sum.R<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
</span><span id="__span-11-2"><a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span><span class="s2">"The sum of the two numbers is 7"</span>
</span><span id="__span-11-3"><a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span><span class="s2">"The sum of the two numbers is 7"</span>
</span><span id="__span-11-4"><a href="#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span><span class="s2">"The sum of the two numbers is 7"</span>
</span><span id="__span-11-5"><a href="#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span><span class="s2">"The sum of the two numbers is 7"</span>
</span></code></pre></div>
<p>Without the <code>srun</code> command, R won’t understand that it can use several cores. Therefore the program is run only once.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a>$<span class="w"> </span>Rscript<span class="w"> </span>serial_sum.R<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
</span><span id="__span-12-2"><a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span><span class="s2">"The sum of the two numbers is 7"</span>
</span></code></pre></div>
<p><strong>Running R with workers</strong></p>
<ul>
<li>First start R and check available workers with <code>future</code>. </li>
<li>Create a R script called `script-workers.R`` with the following content:</li>
</ul>
<div class="language-R highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="nf">library</span><span class="p">(</span><span class="n">future</span><span class="p">)</span>
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="nf">availableWorkers</span><span class="p">()</span>
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="nf">availableCores</span><span class="p">()</span>
</span></code></pre></div>
<ul>
<li>Execute the code with <code>srun -n 1 -c 4 Rscript script-workers.R</code></li>
</ul>
<h2 id="exit">Exit<a class="headerlink" href="#exit" title="Anchor link to this section for reference">¶</a></h2>
<p>When you have finished using the allocation, either wait for it to end, or close it with <code>exit</code></p>
<p><strong>Don’t do it now!</strong> </p>
<ul>
<li>We shall test RStudio first in the next session!</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio"/><input id="__tabbed_6_2" name="__tabbed_6" type="radio"/><div class="tabbed-labels"><label for="__tabbed_6_1">UPPMAX</label><label for="__tabbed_6_2">HPC2N</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="o">[</span>bjornc@p102<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span><span class="nb">exit</span>
</span><span id="__span-14-2"><a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a>
</span><span id="__span-14-3"><a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="nb">exit</span>
</span><span id="__span-14-4"><a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="o">[</span>screen<span class="w"> </span>is<span class="w"> </span>terminating<span class="o">]</span>
</span><span id="__span-14-5"><a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a>Connection<span class="w"> </span>to<span class="w"> </span>p102<span class="w"> </span>closed.
</span><span id="__span-14-6"><a href="#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a>
</span><span id="__span-14-7"><a href="#__codelineno-14-7" id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="o">[</span>bjornc@pelle2<span class="w"> </span>~<span class="o">]</span>$
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="o">[</span>~<span class="o">]</span>$<span class="w"> </span><span class="nb">exit</span>
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="nb">exit</span>
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a>salloc:<span class="w"> </span>Relinquishing<span class="w"> </span>job<span class="w"> </span>allocation<span class="w"> </span><span class="m">20174806</span>
</span><span id="__span-15-4"><a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a>salloc:<span class="w"> </span>Job<span class="w"> </span>allocation<span class="w"> </span><span class="m">20174806</span><span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>revoked.
</span><span id="__span-15-5"><a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="o">[</span>~<span class="o">]</span>$
</span></code></pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Keypoints</p>
<ul>
<li>Start an interactive session on a calculation node by a SLURM allocation</li>
<li>At HPC2N: <code>salloc</code> …</li>
<li>At UPPMAX: <code>interactive</code> …</li>
<li>Follow the same procedure as usual by loading the R module and possible prerequisites.</li>
</ul>
</div>
</div>
</div><footer>
<div aria-label="Footer Navigation" class="rst-footer-buttons" role="navigation">
<a class="btn btn-neutral float-left" href="../batch/" title="Batch"><span class="icon icon-circle-arrow-left"></span> Previous</a>
<a class="btn btn-neutral float-right" href="../rstudio/" title="RStudio">Next <span class="icon icon-circle-arrow-right"></span></a>
</div>
<hr/>
<div role="contentinfo">
<!-- Copyright etc -->
</div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
</div>
</div>
</section>
</div>
<div aria-label="Versions" class="rst-versions" role="note">
<span class="rst-current-version" data-toggle="rst-current-version">
<span>
<a class="fa fa-github" href="https://github.com/UPPMAX/R-matlab-julia-HPC" style="color: #fcfcfc"> GitHub</a>
</span>
<span><a href="../batch/" style="color: #fcfcfc">« Previous</a></span>
<span><a href="../rstudio/" style="color: #fcfcfc">Next »</a></span>
</span>
</div>
<script src="../../js/jquery-3.6.0.min.js"></script>
<script>var base_url = "../..";</script>
<script src="../../js/theme_extra.js"></script>
<script src="../../js/theme.js"></script>
<script src="../../assets/_markdown_exec_pyodide.js"></script>
<script src="../../js/popper.min.js"></script>
<script src="../../js/tippy-bundle.umd.js"></script>
<script src="../../js/clipboard.js"></script>
<script src="../../js/extra.js"></script>
<script src="../../search/main.js"></script>
<script src="../../js/open_in_new_tab.js"></script>
<script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>
</body>
</html>
